PATH = "../data_image/res/"  #FOROTHERSFUNCTIONS path which contain the files generated by weka

Exact = []
Greater = []

print(
    "algorithm;function_id;runs;pred_exact;pred_above;pred_1under;pred_1under_error"
)
X = [
    10, 15, 20, 25, 30, 35, 40, 45, 50, 55, 60, 65, 70, 75, 80, 85, 90, 100, 150,
    200, 250, 300, 350, 400, 450, 500, 550, 600, 650, 700, 750, 800, 850, 900, 950,
    1000
]
for fct in range(1, 11):
    for name_fct in ['J48']:
        exact = []
        greater = []
        for id in X:
            file = open(
                PATH + "function" + str(fct) + "_output_" + name_fct + "_" +
                str(id) + ".csv", "r")
            data = list(map(lambda x: x[:-1], file.readlines()))

            while "" in data:
                data.remove("")

            first = True

            over_prediction = 0  # C~ >= C*
            exact_prediction = 0  # C~ == C*
            predictionM1 = 0  # Number of prediction when C~ = C* - 1
            counterBadPrediction = 0
            counter = 0
            e = 0
            for k in range(len(data)):
                line = data[k]
                value = ''
                predicted = ''
                bool_prediction = True
                if first:
                    if "inst#" in line:
                        first = False
                else:
                    if "+" in line:
                        e += 1
                        bool_prediction = False
                    counter += 1
                    index1 = line.index("x")
                    value += line[index1 + 1]

                    if line[index1 + 2] in [
                            '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'
                    ]:
                        value += line[index1 + 2]
                        if line[index1 + 3] in [
                                '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'
                        ]:
                            value += line[index1 + 3]
                    value = int(value)

                    line = line[index1 + 1:]

                    index2 = line.index("x")
                    predicted += line[index2 + 1]
                    if line[index2 + 2] in [
                            '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'
                    ]:
                        predicted += line[index2 + 2]
                        if line[index2 + 3] in [
                                '0', '1', '2', '3', '4', '5', '6', '7', '8', '9'
                        ]:
                            predicted += line[index2 + 3]
                    predicted = int(predicted)

                    if int(value) <= int(predicted):
                        over_prediction += 1
                        if predicted == value:
                            exact_prediction += 1
                    else:
                        counterBadPrediction += 1
                    if int(value) == int(predicted) + 1:
                        predictionM1 += 1

            c = ";"
            if counterBadPrediction == 0:
                print("J48;" + str(fct) + c + str(id) + c +
                      str(exact_prediction / counter * 100) + c +
                      str(over_prediction / counter * 100) + c +
                      str(predictionM1 / counter * 100) + c + str(None))
            else:
                print("J48;" + str(fct) + c + str(id) + c +
                      str(exact_prediction / counter * 100) + c +
                      str(over_prediction / counter * 100) + c +
                      str(predictionM1 / counter * 100) + c +
                      str(predictionM1 / counterBadPrediction * 100))

            file.close()
